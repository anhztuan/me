<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Manager - Admin Panel</title>
    
    <!-- Chakra UI CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@chakra-ui/cdn@2.3.0/dist/chakra.min.js"></script>
    
    <!-- DaisyUI and Tailwind CSS -->
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.7.2/dist/full.min.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav class="bg-base-200 shadow-lg">
        <div class="container mx-auto px-6 py-3">
            <div class="flex items-center justify-between">
                <div class="text-xl font-bold">Admin Panel</div>
                <a href="index.html" class="btn btn-primary">Back to Dashboard</a>
            </div>
        </div>
    </nav>

    <main class="container mx-auto px-6 py-8">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- API Configuration -->
            <div class="card bg-base-100 shadow-xl">
                <div class="card-body">
                    <h2 class="card-title">Website Configuration</h2>
                    <form id="config-form" class="space-y-4">
                        <div class="form-control">
                            <label class="label">Website Name</label>
                            <input type="text" id="website-name" class="input input-bordered" />
                        </div>
                        <div class="form-control">
                            <label class="label">API Base URL</label>
                            <input type="text" id="api-base-url" class="input input-bordered" />
                        </div>
                        <button type="submit" class="btn btn-primary">Save Changes</button>
                    </form>
                </div>
            </div>

            <!-- Endpoint Management -->
            <div class="card bg-base-100 shadow-xl">
                <div class="card-body">
                    <h2 class="card-title">Endpoint Management</h2>
                    <div id="endpoints-manager" class="space-y-4">
                        <!-- Endpoints will be loaded here -->
                    </div>
                    <button class="btn btn-secondary" onclick="addNewEndpoint()">Add New Endpoint</button>
                </div>
            </div>
        </div>
    </main>

    <script src="admin.js"></script>
</body>
</html>
<script>
    // Admin panel functionality
let config = JSON.parse(localStorage.getItem('apiManagerConfig')) || {
    websiteName: 'API Manager',
    apiBaseUrl: 'https://jsonplaceholder.typicode.com',
    endpoints: []
};

// Initialize form
function initForm() {
    document.getElementById('website-name').value = config.websiteName;
    document.getElementById('api-base-url').value = config.apiBaseUrl;
    updateEndpointsList();
}

// Save configuration
document.getElementById('config-form').addEventListener('submit', (e) => {
    e.preventDefault();
    config.websiteName = document.getElementById('website-name').value;
    config.apiBaseUrl = document.getElementById('api-base-url').value;
    saveConfig();
    showNotification('Configuration saved successfully', 'success');
});

// Add new endpoint
function addNewEndpoint() {
    const endpoint = {
        id: Date.now().toString(),
        name: 'New Endpoint',
        url: `${config.apiBaseUrl}/new-endpoint`,
        method: 'GET',
        status: 'Inactive'
    };
    config.endpoints.push(endpoint);
    saveConfig();
    updateEndpointsList();
    showNotification('New endpoint added', 'success');
}

// Update endpoints list
function updateEndpointsList() {
    const container = document.getElementById('endpoints-manager');
    container.innerHTML = '';

    config.endpoints.forEach(endpoint => {
        const endpointEl = document.createElement('div');
        endpointEl.className = 'card bg-base-200 mb-4';
        endpointEl.innerHTML = `
            <div class="card-body">
                <div class="flex items-center justify-between gap-4">
                    <input type="text" value="${endpoint.name}" 
                           class="input input-sm input-bordered w-1/3"
                           onchange="updateEndpoint('${endpoint.id}', 'name', this.value)" />
                    <input type="text" value="${endpoint.url}"
                           class="input input-sm input-bordered w-1/2"
                           onchange="updateEndpoint('${endpoint.id}', 'url', this.value)" />
                    <select class="select select-sm select-bordered"
                            onchange="updateEndpoint('${endpoint.id}', 'method', this.value)">
                        ${['GET', 'POST', 'PUT', 'DELETE'].map(m => 
                            `<option ${m === endpoint.method ? 'selected' : ''}>${m}</option>`
                        ).join('')}
                    </select>
                    <button class="btn btn-error btn-sm" 
                            onclick="deleteEndpoint('${endpoint.id}')">Delete</button>
                </div>
            </div>
        `;
        container.appendChild(endpointEl);
    });
}

// Update endpoint
function updateEndpoint(id, field, value) {
    const endpoint = config.endpoints.find(e => e.id === id);
    if (endpoint) {
        endpoint[field] = value;
        saveConfig();
        showNotification('Endpoint updated', 'success');
    }
}

// Delete endpoint
function deleteEndpoint(id) {
    config.endpoints = config.endpoints.filter(e => e.id !== id);
    saveConfig();
    updateEndpointsList();
    showNotification('Endpoint deleted', 'warning');
}

// Save configuration
function saveConfig() {
    localStorage.setItem('apiManagerConfig', JSON.stringify(config));
}

// Show notification using Chakra UI
function showNotification(message, type = 'info') {
    // Wait for Chakra UI to be initialized
    if (window.chakra && window.chakra.toast) {
        window.chakra.toast({
            title: message,
            status: type,
            duration: 3000,
            isClosable: true,
            position: 'top-right'
        });
    } else {
        // Fallback to console log if Chakra UI is not available
        console.log(`${type.toUpperCase()}: ${message}`);
    }
}

// Initialize after Chakra UI is loaded
window.addEventListener('load', () => {
    // Initialize form after everything is loaded
    initForm();
});
</script>
<style>
    /* Custom styles */
.endpoint-card {
    transition: all 0.3s ease;
}

.endpoint-card:hover {
    transform: translateY(-2px);
}

/* Custom loading animation */
.loading-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
}

/* Custom notification styles */
.notification {
    position: fixed;
    top: 20px;
    right: 20px;
    padding: 1rem;
    border-radius: 0.5rem;
    z-index: 1000;
    animation: slideIn 0.3s ease;
}

@keyframes slideIn {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}
</style>
